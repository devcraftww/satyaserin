version: 0.1


phases:
  install:
    commands:
      - echo Nothing to do in the install phase...
  pre_build:
    commands:
      - echo Nothing to do in the pre_build phase...
  build:
    commands:
      - echo Build started on `date`
      - npm install
      - npm run build:dev
      - |
        if [ "$ENVIRONMENT" = "dev" ]
        then
          npm run build:dev
        fi
      - |
        if [ "$ENVIRONMENT" = "stage" ]
        then
          npm run build:stage
        fi
      - |
        if [ "$ENVIRONMENT" = "prod" ]
        then
          npm run build:prod
        fi
  post_build:
    commands:
      - echo Build completed on `date`
artifacts:
  files:
    - '**/*'
  discard-paths: no
  base-directory: dist
